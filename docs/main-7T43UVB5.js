import{i as at}from"./chunk-IPUEU5VM.js";import{a as rt,b as nt,c as it,d as st,f as ct,g as R,i as ft}from"./chunk-ET4ZATCD.js";import{a as ut,b as pt,c as dt,d as lt,e as m,f as N,g as mt,h as E,i as ht,j as O,k as g,l as v,m as b}from"./chunk-53DQ3HUO.js";import{$ as p,A as y,B as C,E as A,F as z,G as K,Gb as ot,I as Y,L,O as J,Pa as W,S as X,U as F,Y as s,a,b as h,ba as i,c as H,ca as c,cb as tt,ea as Z,f as P,fa as q,i as B,mb as et,o as V,s as u,sa as Q,u as D,z as U}from"./chunk-PJEERNVT.js";var M=class t{title="test";constructor(){}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=W({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(e,r){e&1&&tt(0,"router-outlet")},dependencies:[ct,at,ot],encapsulation:2})};var Et=t=>t.auth,gt=N(Et,t=>t.isLoggedIn),ae=N(Et,t=>t.user);var T=class t{constructor(o,e){this.router=o;this.store=e}canActivate(){return this.store.select(gt).pipe(A(1),u(o=>o?!0:this.router.createUrlTree(["/auth"])))}static \u0275fac=function(e){return new(e||t)(i(R),i(m))};static \u0275prov=s({token:t,factory:t.\u0275fac,providedIn:"root"})};var vt=[{path:"auth",loadComponent:()=>import("./chunk-POJ2JAIH.js").then(t=>t.AuthLayoutComponent),children:[{path:"login",loadComponent:()=>import("./chunk-CR6E6TQK.js").then(t=>t.AuthFormComponent),data:{type:"login"}},{path:"register",loadComponent:()=>import("./chunk-CR6E6TQK.js").then(t=>t.AuthFormComponent),data:{type:"register"}},{path:"reset",loadComponent:()=>import("./chunk-CR6E6TQK.js").then(t=>t.AuthFormComponent),data:{type:"reset"}}]},{path:"dashboard",loadComponent:()=>import("./chunk-GFPZQC2P.js").then(t=>t.DashboardComponent),canActivate:[T]},{path:"",redirectTo:"auth/login",pathMatch:"full"},{path:"**",redirectTo:"auth/login"}];var wt={dispatch:!0,functional:!1,useEffectsErrorHandler:!0},x="__@ngrx/effects_create__";function I(t,o={}){let e=o.functional?t:t(),r=a(a({},wt),o);return Object.defineProperty(e,x,{value:r}),e}function Dt(t){return Object.getOwnPropertyNames(t).filter(r=>t[r]&&t[r].hasOwnProperty(x)?t[r][x].hasOwnProperty("dispatch"):!1).map(r=>{let f=t[r][x];return a({propertyName:r},f)})}function Ut(t){return Dt(t)}function It(t){return Object.getPrototypeOf(t)}function Lt(t){return!!t.constructor&&t.constructor.name!=="Object"&&t.constructor.name!=="Function"}function St(t){return typeof t=="function"}function Nt(t){return t.filter(St)}function kt(t,o,e){let r=It(t),n=!!r&&r.constructor.name!=="Object"?r.constructor.name:null,l=Ut(t).map(({propertyName:d,dispatch:Mt,useEffectsErrorHandler:jt})=>{let G=typeof t[d]=="function"?t[d]():t[d],$=jt?e(G,o):G;return Mt===!1?$.pipe(z()):$.pipe(J()).pipe(u(Tt=>({effect:t[d],notification:Tt,propertyName:d,sourceName:n,sourceInstance:t})))});return U(...l)}var Gt=10;function yt(t,o,e=Gt){return t.pipe(C(r=>(o&&o.handleError(r),e<=1?t:yt(t,o,e-1))))}var Ct=(()=>{class t extends P{constructor(e){super(),e&&(this.source=e)}lift(e){let r=new t;return r.source=this,r.operator=e,r}static{this.\u0275fac=function(r){return new(r||t)(i(lt))}}static{this.\u0275prov=s({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function S(...t){return y(o=>t.some(e=>typeof e=="string"?e===o.type:e.type===o.type))}var xe=new p("@ngrx/effects Internal Root Guard"),_e=new p("@ngrx/effects User Provided Effects"),we=new p("@ngrx/effects Internal Root Effects"),De=new p("@ngrx/effects Internal Root Effects Instances"),Ue=new p("@ngrx/effects Internal Feature Effects"),Le=new p("@ngrx/effects Internal Feature Effects Instance Groups"),$t=new p("@ngrx/effects Effects Error Handler",{providedIn:"root",factory:()=>yt}),Ht="@ngrx/effects/init",Pt=ut(Ht);function Bt(t,o){if(t.notification.kind==="N"){let e=t.notification.value;!Vt(e)&&o.handleError(new Error(`Effect ${zt(t)} dispatched an invalid action: ${Kt(e)}`))}}function Vt(t){return typeof t!="function"&&t&&t.type&&typeof t.type=="string"}function zt({propertyName:t,sourceInstance:o,sourceName:e}){let r=typeof o[t]=="function";return!!e?`"${e}.${String(t)}${r?"()":""}"`:`"${String(t)}()"`}function Kt(t){try{return JSON.stringify(t)}catch{return t}}var Yt="ngrxOnIdentifyEffects";function Jt(t){return k(t,Yt)}var Xt="ngrxOnRunEffects";function Zt(t){return k(t,Xt)}var qt="ngrxOnInitEffects";function Qt(t){return k(t,qt)}function k(t,o){return t&&o in t&&typeof t[o]=="function"}var At=(()=>{class t extends B{constructor(e,r){super(),this.errorHandler=e,this.effectsErrorHandler=r}addEffects(e){this.next(e)}toActions(){return this.pipe(L(e=>Lt(e)?It(e):e),D(e=>e.pipe(L(Wt))),D(e=>{let r=e.pipe(Y(n=>te(this.errorHandler,this.effectsErrorHandler)(n)),u(n=>(Bt(n,this.errorHandler),n.notification)),y(n=>n.kind==="N"&&n.value!=null),K()),f=e.pipe(A(1),y(Qt),u(n=>n.ngrxOnInitEffects()));return U(r,f)}))}static{this.\u0275fac=function(r){return new(r||t)(i(Q),i($t))}}static{this.\u0275prov=s({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Wt(t){return Jt(t)?t.ngrxOnIdentifyEffects():""}function te(t,o){return e=>{let r=kt(e,t,o);return Zt(e)?e.ngrxOnRunEffects(r):r}}var ee=(()=>{class t{get isStarted(){return!!this.effectsSubscription}constructor(e,r){this.effectSources=e,this.store=r,this.effectsSubscription=null}start(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))}ngOnDestroy(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)}static{this.\u0275fac=function(r){return new(r||t)(i(At),i(m))}}static{this.\u0275prov=s({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Ft(...t){let o=t.flat(),e=Nt(o);return Z([e,q(()=>{c(pt),c(dt,{optional:!0});let r=c(ee),f=c(At),n=!r.isStarted;n&&r.start();for(let l of o){let d=St(l)?c(l):l;f.addEffects(d)}n&&c(m).dispatch(Pt())})])}var Rt={user:null,loading:!1,error:null,token:null,isLoggedIn:!1},Ot=ht(Rt,E(O,t=>h(a({},t),{loading:!0,error:null})),E(g,(t,{user:o})=>h(a({},t),{user:o,loading:!1,token:"dummy-token",isLoggedIn:!0})),E(v,(t,{error:o})=>h(a({},t),{error:o,loading:!1,isLoggedIn:!1})),E(b,()=>Rt));var _=class t{constructor(o){this.http=o}BASE_URL="http://localhost:3000/api/auth";login(o,e){return this.http.post(`${this.BASE_URL}/login`,{email:o,password:e})}fechtData(o){return H(this,null,function*(){let e=yield fetch("https://jsonplaceholder.typicode.com/users")})}static \u0275fac=function(e){return new(e||t)(i(nt))};static \u0275prov=s({token:t,factory:t.\u0275fac,providedIn:"root"})};var w=class t{constructor(o){this.router=o}actions$=c(Ct);api=c(_);login$=I(()=>this.actions$.pipe(S(O),X(o=>this.api.login(o.email,o.password).pipe(u(e=>g({user:{id:e.id,name:e.name,email:e.email},token:e.token})),C(e=>V(v({error:e})))))),{dispatch:!0});LOGIN_SUCCESS$=I(()=>this.actions$.pipe(S(g),F(()=>{console.log("Login successful, navigating to dashboard..."),this.router.navigate(["/dashboard"])})),{dispatch:!1});LOGIN_FAILURE$=I(()=>this.actions$.pipe(S(v),F(()=>{alert("Invalid credentials")})),{dispatch:!1});LOGOUT=I(()=>this.actions$.pipe(S(b),F(()=>{localStorage.removeItem("token"),this.router.navigate(["/auth"])})),{dispatch:!1});static \u0275fac=function(e){return new(e||t)(i(R))};static \u0275prov=s({token:t,factory:t.\u0275fac})};var bt={providers:[it(st()),mt({auth:Ot}),Ft([w]),ft(vt),et({eventCoalescing:!0})]};rt(M,bt).catch(t=>console.error(t));

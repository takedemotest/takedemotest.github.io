import{a as P,b as p,c as R,d as k,e as L,f as M,g as O,h as j,i as q}from"./chunk-IPUEU5VM.js";import{e as T,h as N,j as V}from"./chunk-ET4ZATCD.js";import{e as G,j as U}from"./chunk-53DQ3HUO.js";import{Eb as S,Fb as w,Ga as o,Gb as E,Ka as C,Pa as F,Ta as c,Y as b,_a as l,ab as a,bb as n,cb as x,db as I,eb as h,hb as s,ib as A,jb as v}from"./chunk-PJEERNVT.js";var f=class e{constructor(){}static email(){return i=>{let r=i.value;return r?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r)?null:{emailInvalid:!0}:null}}static password(){return i=>{let r=i.value;if(!r)return null;let t={},m=/[A-Z]/.test(r),u=/[!@#$%^&*(),.?":{}|<>]/.test(r),g=/[0-9]/.test(r),d=r.length>=6;return m||(t.hasUpperCase=!0),u||(t.hasSpecial=!0),g||(t.hasNumber=!0),d||(t.hasLen=!0),Object.keys(t).length?t:null}}static match(i,r){return t=>{let m=t.get(i),u=t.get(r);return!m||!u?null:m.value!==u.value?(u.setErrors({notMatching:!0}),{notMatching:!0}):(u.setErrors(null),null)}}static \u0275fac=function(r){return new(r||e)};static \u0275prov=b({token:e,factory:e.\u0275fac,providedIn:"root"})};var y={login:{title:"Login",actionText:"Login",fields:[{name:"email",label:"Email",type:"email",placeholder:"email",validators:[p.required,p.email,f.email()]},{name:"password",label:"Password",type:"password",placeholder:"password",validators:[p.required,f.password()]}],submitAction:"login"},register:{title:"Register",actionText:"Register",fields:[{name:"name",label:"Name",type:"text",placeholder:"text",validators:[p.required]},{name:"email",label:"Email",placeholder:"email",type:"email",validators:[p.required,p.email]},{name:"password",label:"Password",placeholder:"Password",type:"password",validators:[p.required,f.password()]},{name:"confirmPassword",label:"Confirm Password",type:"password",placeholder:"Confirm password",validators:[p.required]}],groupValidator:f.match("password","confirmPassword"),submitAction:"Register"},reset:{title:"Reset Password",actionText:"Reset",fields:[{name:"email",label:"Email",type:"email",placeholder:"email",validators:[p.required,p.email]}],submitAction:"Reset"}};function B(e,i){if(e&1&&(a(0,"span"),s(1),n()),e&2){let r=h(2).$implicit;o(),v(" ",r.label," is required ")}}function H(e,i){e&1&&(a(0,"span"),s(1," Invalid email format "),n())}function z(e,i){e&1&&(a(0,"span"),s(1," Password should be 6 character. "),n())}function Z(e,i){e&1&&(a(0,"span"),s(1," Password too hasUpperCase "),n())}function J(e,i){e&1&&(a(0,"span"),s(1," Passwords do not match "),n())}function K(e,i){if(e&1&&(a(0,"small",16),c(1,B,2,1,"span",7)(2,H,2,0,"span",7)(3,z,2,0,"span",7)(4,Z,2,0,"span",7)(5,J,2,0,"span",7),n()),e&2){let r,t,m,u,g,d=h().$implicit,_=h();o(),l("ngIf",(r=_.form.get(d.name))==null||r.errors==null?null:r.errors.required),o(),l("ngIf",(t=_.form.get(d.name))==null||t.errors==null?null:t.errors.emailInvalid),o(),l("ngIf",(m=_.form.get(d.name))==null||m.errors==null?null:m.errors.hasLen),o(),l("ngIf",(u=_.form.get(d.name))==null||u.errors==null?null:u.errors.hasUpperCase),o(),l("ngIf",(g=_.form.get(d.name))==null||g.errors==null?null:g.errors.notMatching)}}function Q(e,i){if(e&1&&(a(0,"div",14)(1,"label"),s(2),n(),x(3,"input",15),c(4,K,6,5,"small",8),n()),e&2){let r,t=i.$implicit,m=h();o(2),A(t.label),o(),l("type",t.type)("formControlName",t.name),o(),l("ngIf",((r=m.form.get(t.name))==null?null:r.touched)&&((r=m.form.get(t.name))==null?null:r.invalid))}}function W(e,i){e&1&&(a(0,"p"),s(1,"Processing..."),n())}function X(e,i){if(e&1&&(a(0,"p",16),s(1),n()),e&2){let r=h();o(),v(" ",r.error," ")}}function Y(e,i){e&1&&(a(0,"a",17),s(1," Create account "),n())}function ee(e,i){e&1&&(a(0,"a",18),s(1," Forgot password? "),n())}function te(e,i){e&1&&(a(0,"a",19),s(1," Back to login "),n())}var D=class e{constructor(i,r,t){this.fb=i;this.store=r;this.route=t}form;formConfig;authType;loading=!1;error=null;ngOnInit(){if(this.authType=this.route.snapshot.data.type,this.formConfig=y[this.authType],!this.authType){console.error("Form type missing");return}if(this.formConfig=y[this.authType],!this.formConfig){console.error("Invalid form config");return}this.form=this.fb.group({}),this.formConfig.fields.forEach(i=>{this.form.addControl(i.name,this.fb.control("",i.validators))}),this.formConfig.groupValidator&&this.form.setValidators(this.formConfig.groupValidator)}onSubmit(){console.log(this.form.value),this.login()}login(){if(this.form.valid){let{email:i,password:r}=this.form.value;this.store.dispatch(U({email:i,password:r}))}}static \u0275fac=function(r){return new(r||e)(C(j),C(G),C(T))};static \u0275cmp=F({type:e,selectors:[["app-auth-form"]],decls:16,vars:10,consts:[[1,"container","vh-100","d-flex","justify-content-center","align-items-center"],[1,"card","shadow","p-4",2,"width","400px"],[1,"auth-container"],[1,"title"],[3,"ngSubmit","formGroup"],["class","form-group",4,"ngFor","ngForOf"],["type","submit",1,"btn","mt-2",3,"disabled"],[4,"ngIf"],["class","error",4,"ngIf"],[1,"links","mt-1"],["routerLink","/auth/register",4,"ngIf"],["routerLink","/auth/reset",4,"ngIf"],["routerLink","/auth/login",4,"ngIf"],["src","../../../assets/krishito.jpg","alt","flash Screen",1,"flash-screen"],[1,"form-group"],[1,"form-control",3,"type","formControlName"],[1,"error"],["routerLink","/auth/register"],["routerLink","/auth/reset"],["routerLink","/auth/login"]],template:function(r,t){r&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),s(4),n(),a(5,"form",4),I("ngSubmit",function(){return t.onSubmit()}),c(6,Q,5,4,"div",5),a(7,"button",6),s(8),n(),c(9,W,2,0,"p",7)(10,X,2,1,"p",8),n(),a(11,"div",9),c(12,Y,2,0,"a",10)(13,ee,2,0,"a",11)(14,te,2,0,"a",12),n()()()(),x(15,"img",13)),r&2&&(o(4),v(" ",t.formConfig.title," "),o(),l("formGroup",t.form),o(),l("ngForOf",t.formConfig.fields),o(),l("disabled",t.form.invalid||t.loading),o(),v(" ",t.formConfig.actionText," "),o(),l("ngIf",t.loading),o(),l("ngIf",t.error),o(2),l("ngIf",t.authType==="login"),o(),l("ngIf",t.authType==="login"),o(),l("ngIf",t.authType!=="login"))},dependencies:[q,L,P,R,k,M,O,E,S,w,V,N],styles:[".flash-screen[_ngcontent-%COMP%]{position:absolute;left:0;top:0;width:100%;height:100vh;z-index:-1}.auth-container[_ngcontent-%COMP%]   .links[_ngcontent-%COMP%]{display:flex;justify-content:space-between}"]})};export{D as AuthFormComponent};
